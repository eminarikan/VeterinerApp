<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="tr">
<head th:replace="fragments/head :: head"></head>

<body>
    <div class="flex">
        <div th:insert="fragments/sidebar.html :: sidebar"></div>
        <div class="w-full bg-slate-100">
            <div th:insert="fragments/header.html :: header('Kayıtlı Hayvan Sahipleri')"></div>


                <a href="/owners/create" title="Hayvan Sahibi Ekle" class="p-1 absolute top-20 right-20 rounded-full bg-cyan-700 transform hover:scale-125">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="#ffffff">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                </a>

            <div th:if="${owners.size() != 0}">
                <div class="w-4/6 mx-auto mt-10">
                    <table class="w-full overflow-y-auto max-h-96">
                        <thead class="border-b border-blue-800">
                        <tr>
                            <th class="text-left">İsim</th>
                            <th class="text-left">Soyisim</th>
                            <th class="text-left">Email</th>
                            <th class="text-left">Hayvan Sayısı</th>
                            <th class="text-left">Seçenekler</th>
                        </tr>
                        </thead>
                        <tbody th:each="owner: ${owners}">
                        <tr class="border-b border-blue-200">
                            <td th:text="${owner.getFirstName()}" class="py-4"></td>
                            <td th:text="${owner.getLastName()}"></td>
                            <td th:text="${owner.getEmail()}"></td>
                            <td th:text="${owner.getPets().size()}"></td>
                            <td class="flex items-center py-4">
                                <a th:href="@{/owners/show/{id}(id=${owner.getId()})}"  title="Göster" class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform hover:scale-125" fill="none" viewBox="0 0 24 24" stroke="#22c55e">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                    </svg>
                                </a>
                                <a th:href="@{/owners/edit/{id}(id=${owner.getId()})}" class="ml-2" title="Düzenle">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform hover:scale-125" fill="none" viewBox="0 0 24 24" stroke="#2563eb">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                                    </svg>
                                </a>
                                <a th:href="@{/owners/{id}/pets/create(id=${owner.getId()})}" class="ml-2" title="Hayvan Ekle">
                                        <svg class="h-6 w-6 transform hover:scale-125" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M40.1001 33.5099C37.9122 31.438 35.0134 30.2832 32.0001 30.2832C28.9868 30.2832 26.088 31.438 23.9001 33.5099L14.1301 42.7499C8.5301 47.8399 12.5701 57.5699 20.1301 57.1899C24.2301 57.0799 27.5601 54.9799 31.9901 55.0599C36.5801 54.9799 39.9901 56.8299 44.1101 57.1899C51.5401 57.3599 55.3801 47.7399 49.8601 42.7499L40.1001 33.5099Z" fill="#facc15"/>
                                            <path d="M56.9201 19.93C53.1001 19.18 50.1801 23.43 49.4201 27.09C47.1401 38.42 58.1201 40.58 60.6901 29.59C61.7401 24.88 60.0801 20.63 56.9201 19.93Z" fill="#facc15"/>
                                            <path d="M40.7301 26.05C44.5301 26.05 47.6201 21.73 47.6201 16.43C47.2401 3.66998 34.2201 3.66998 33.8501 16.43C33.8501 21.73 36.9401 26.05 40.7301 26.05Z" fill="#facc15"/>
                                            <path d="M14.58 27.09C13.83 23.43 10.9 19.18 7.08004 19.93C3.86238e-05 21.72 3.00004 36.81 9.92004 36.85C13.84 36.72 15.65 32.17 14.58 27.09Z" fill="#facc15"/>
                                            <path d="M23.27 26.05C27.06 26.05 30.15 21.73 30.15 16.43C29.78 3.66998 16.76 3.66998 16.38 16.43C16.38 21.73 19.47 26.05 23.27 26.05Z" fill="#facc15"/>
                                        </svg>
                                </a>
                                <form class="ml-2" sec:authorize="hasAuthority('ADMIN')" id="ownerIndexDeleteForm" th:method="post" th:action="@{/admin/owners/delete/{id}(id=${owner.getId()})}">
                                    <button type="submit" title="Sil">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform hover:scale-125" fill="none" viewBox="0 0 24 24" stroke="#f43f5e">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                        </svg>
                                    </button>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="text-center mt-10" th:unless="${owners.size() != 0}">Henüz kayıtlı hayvan sahibi yok!</div>
        </div>
    </div>

    <script th:inline="javascript">
        document.getElementById("ownerIndexDeleteForm").addEventListener("click", function (event){
            if (confirm("Bu Kayıt Silinecek!") == false) {
                event.preventDefault();
            }
        });
    </script>
</body>
</html>